#include "../../../Display/ST7565/ST7565.h"

#define PIN_RED 0
#define PIN_GREEN 1
#define PIN_BLUE 2

//#define PIN_ANODE

#define PIN_CLK 6
#define PIN_MOSI 7
#define PIN_CS 15

#define PIN_A0 13
#define PIN_RST 14


struct ST7565 localDisplay;
struct ST7565 *localDisplayPointer = &localDisplay;

uint8_t snoopy[160] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                  0x00, 0x00, 0x01, 0x02, 0x02, 0x04, 0x04, 0x04, 0x04, 0x08,
                  0x09, 0x10, 0x20, 0x40, 0x40, 0x40, 0x40, 0x40, 0x20, 0x20,
                  0x10, 0x08, 0x04, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x1C,
                  0x7C, 0x82, 0x02, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
                  0x81, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x3E, 0x01,
                  0x7E, 0xFE, 0xFD, 0x3A, 0xC4, 0x38, 0x00, 0x00, 0x00, 0x00,
                  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                  0x00, 0x83, 0xFC, 0x20, 0x20, 0x20, 0xE0, 0x18, 0x07, 0x03,
                  0x81, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x08,
                  0x08, 0xF0, 0x28, 0x08, 0x08, 0x08, 0x70, 0x00, 0x38, 0x90,
                  0xA0, 0x80, 0x80, 0x60, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00
                  };



void setup()
{
    localDisplayPointer->pinRed = PIN_RED;
    localDisplayPointer->pinGreen = PIN_GREEN;
    localDisplayPointer->pinBlue = PIN_BLUE;
    localDisplayPointer->pinCLK = PIN_CLK;
    localDisplayPointer->pinMOSI = PIN_MOSI;
    localDisplayPointer->spiInstance = spi0;
    localDisplayPointer->pinA0 = PIN_A0;
    localDisplayPointer->pinCS = PIN_CS;
    localDisplayPointer->pinRst = PIN_RST;
    localDisplayPointer->firstLineCorrector = 40;
    
    ST7565_Init(localDisplayPointer);

    ST7565_SetColor(localDisplayPointer, 50, 15, 150);

    ST7565_SetFirstLine(localDisplayPointer, 0);

    __writeAllToZero__(localDisplayPointer);

    ST7565_WritePixels(localDisplayPointer, 0, 0, &snoopy[0], 40);
    ST7565_WritePixels(localDisplayPointer, 1, 0, &snoopy[40], 40);
    ST7565_WritePixels(localDisplayPointer, 2, 0, &snoopy[80], 40);
    ST7565_WritePixels(localDisplayPointer, 3, 0, &snoopy[120], 40);
}

int main()
{
    setup();

    while(1) {

    }

}


